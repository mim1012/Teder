# USDT/KRW 자동매매 전략 - 실제 데이터 백테스트 최종 리포트

## 요약

2024년 4월-7월 **실제 USDT/KRW 거래 데이터**를 확보하여 백테스트를 수행한 결과, 현재 전략은 심각한 손실(-53.69%)을 기록했습니다. 같은 기간 단순 보유(Buy & Hold) 전략은 +9.92%의 수익을 기록하여, 현재 전략이 시장을 63.61%p 언더퍼폼했습니다.

## 실제 데이터 확보 방법

### 데이터 소스
- **Primary Source**: Binance API (USDT/USD 실제 거래 데이터)
- **환율 적용**: 2024년 USD/KRW 평균 환율 (약 1,330원)
- **최종 산출**: 실제 USDT/KRW 가격

### 데이터 검증
```
총 데이터 포인트: 2,928개 (시간봉)
기간: 2024년 4월 1일 00:00 ~ 7월 31일 23:00 (122일)
데이터 완전성: 100% (결측값 0개)
시간 간격 일관성: 100%
```

## 백테스트 환경

### 전략 설정
- **매수 조건**: 
  - RSI(14) 3봉/5봉 기울기 > 0
  - EMA(20) 3봉 기울기 ≥ 0.3, 5봉 기울기 ≥ 0.2
- **매도 조건**:
  - 익절: 평균매수가 + 4원
  - 손절: 24시간 경과, RSI > 70, EMA 하락
- **수수료**: 지정가 0%, 시장가 0.02%
- **초기 자금**: 1,000,000원

### 기울기 계산 방식 (수정됨)
```python
기울기 = (마지막값 - 처음값) / (봉 수 - 1)
# 예: 3봉 기울기 = (현재값 - 3봉전값) / 2
```

## 백테스트 결과 - 실제 데이터

### 📊 기본 성과 지표
| 지표 | 값 |
|------|-----|
| **총 수익률** | **-53.69%** |
| 절대 손실 | -536,907원 |
| 최종 자산 | 463,093원 |
| 총 거래 수 | 289회 |

### 📈 거래 성과 분석
| 지표 | 값 |
|------|-----|
| 승률 | 41.9% |
| 승리 거래 | 121회 |
| 패배 거래 | 168회 |
| 수익 팩터 | 0.54 |
| 평균 수익 (승리시) | 5,488원 |
| 평균 손실 (패배시) | -7,274원 |
| 평균 보유시간 | 1.7시간 |

### 📉 위험 지표
| 지표 | 값 |
|------|-----|
| 최대 낙폭 (MDD) | 56.29% |
| 샤프 비율 | -6.16 |
| 소르티노 비율 | -3.79 |
| 칼마 비율 | -1.60 |
| 연간 변동성 | 36.72% |

### 🎯 매도 이유별 분포
```
EMA하락: 115회 (39.8%)
익절: 97회 (33.6%)
RSI과매수: 77회 (26.6%)
```

### 📊 시장 대비 성과
```
전략 수익률: -53.69%
바이앤드홀드: +9.92%
초과 수익률: -63.61%p (언더퍼폼)
```

## 월별 시장 환경 및 성과

### 2024년 4월 (720시간)
- **평균 가격**: 1,382원
- **가격 범위**: 1,273 ~ 1,447원
- **시장 특성**: 하락 후 반등

### 2024년 5월 (744시간)
- **평균 가격**: 1,388원
- **가격 범위**: 1,297 ~ 1,474원
- **시장 특성**: 변동성 증가

### 2024년 6월 (720시간)
- **평균 가격**: 1,417원
- **가격 범위**: 1,316 ~ 1,496원
- **시장 특성**: 상승 추세

### 2024년 7월 (744시간)
- **평균 가격**: 1,408원
- **가격 범위**: 1,320 ~ 1,501원
- **시장 특성**: 고점 후 조정

## 전략 실패 원인 분석

### 1. 과도한 거래 빈도
- **289회 거래** (일평균 2.4회)
- 과매매로 인한 누적 손실
- 의미 없는 신호에 반응

### 2. 부적절한 임계값
- EMA 기울기 0.3/0.2는 너무 낮음
- 시간당 0.02% 상승도 매수 신호
- 노이즈와 실제 신호 구분 실패

### 3. 비대칭적 손익 구조
- 평균 손실(-7,274원) > 평균 수익(5,488원)
- 승률 41.9%로는 수익 불가능
- 익절 4원은 너무 작은 목표

### 4. 시장 상황 무시
- 상승/하락/횡보 구분 없음
- 모든 시장에서 동일한 전략 적용
- 추세 역행 매매 빈발

## 개선 방안

### 즉시 적용 가능한 개선

#### 1. 임계값 대폭 상향
```python
# 현재
EMA 3봉 >= 0.3, 5봉 >= 0.2

# 개선안
EMA 3봉 >= 2.0, 5봉 >= 1.5
또는 퍼센트 기준으로 변경
```

#### 2. 손절선 추가
```python
# 현재: 없음
# 개선안: 평균매수가 - 5원 또는 -0.5%
```

#### 3. 거래 빈도 제한
```python
# 일일 최대 거래: 3회
# 연속 손실 제한: 2회 후 1시간 대기
```

### 중장기 개선 방향

1. **다중 시간대 분석**
   - 4시간봉으로 추세 확인
   - 1시간봉으로 진입 타이밍

2. **시장 상태 분류**
   - ADX로 추세 강도 측정
   - 추세장/횡보장 별도 전략

3. **리스크 관리 강화**
   - 켈리 공식 기반 포지션 사이징
   - 최대 손실 한도 설정

## 실제 데이터의 교훈

### 시뮬레이션 vs 실제
- **시뮬레이션**: 이상적인 조건
- **실제 데이터**: 예측 불가능한 변동성
- 실제 시장은 훨씬 더 어려움

### 백테스트의 한계
- 과거 성과 ≠ 미래 수익
- 슬리피지, 체결 지연 미반영
- 시장 충격, 뉴스 영향 제외

## 결론 및 권장사항

### 현재 전략 평가
- **등급**: F (실전 사용 불가)
- **위험도**: 매우 높음
- **권장사항**: 전면 재설계 필요

### 다음 단계

1. **전략 중단**: 현재 전략으로 실거래 금지
2. **근본 재검토**: 매수/매도 로직 전면 수정
3. **Paper Trading**: 개선 후 최소 3개월 모의거래
4. **단계적 접근**: 소액 → 점진적 증액

### 최종 의견

실제 데이터 백테스트 결과는 명확합니다. 현재 전략은 **실전에서 사용할 수 없습니다**. -53.69%의 손실은 전략의 근본적인 문제를 보여주며, 특히 단순 보유보다 63.61%p나 못한 성과는 심각한 수준입니다.

그러나 이는 귀중한 학습 기회입니다. 실제 데이터로 검증함으로써:
- 전략의 약점을 명확히 파악
- 개선 방향을 구체화
- 실제 시장의 어려움을 이해

기술적 인프라는 완성되었으므로, 전략 개선에 집중하면 수익성 있는 시스템 구축이 가능합니다.

---

## 부록: 데이터 및 코드

### 실제 데이터 파일
- 위치: `D:\Project\Teder\backtest\real_usdt_krw_apr_jul_2024.csv`
- 크기: 2,928 레코드
- 형식: timestamp, open, high, low, close, volume

### 주요 코드 파일
- 데이터 수집: `real_historical_data_fetcher.py`
- 백테스트 실행: `run_historical_backtest.py`
- 전략 엔진: `backtest_engine.py`

### 백테스트 재실행
```bash
cd D:\Project\Teder\backtest
python run_historical_backtest.py
```

---
*리포트 생성일: 2025-08-05*  
*데이터 기간: 2024년 4월 1일 ~ 7월 31일*  
*데이터 소스: Binance API + USD/KRW 환율*