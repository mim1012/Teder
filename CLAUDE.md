# 코인원 USDT/KRW 자동매매 프로그램 요구사항

## 기본 사양
- 거래대상: USDT/KRW (테더/원화)
- 차트: 1시간봉
- 거래소: 코인원 (시세조회 API와 거래 API가 분리됨)
- 운영환경: 24시간 가동 가능한 가상서버 환경 구축 필요

## 매수 전략

### 매수 조건 (모두 충족시 발동)
1. RSI(14) 조건: 직전 3봉과 5봉의 기울기가 모두 양수 (0.00 불포함)
2. EMA(20) 조건: 
   - 직전 3봉 기울기 >= 0.3
   - 직전 5봉 기울기 >= 0.2

### 매수 방법
- 가격: 매도1호가
- 수량: 보유 원화 전량
- 주문방식: 지정가 매수
- 부분체결 처리: 10분 대기 후 미체결량 취소, 체결된 USDT만으로 운용

## 매도 전략

### 익절 매도
- 조건: 평균매수가 + 4원
- 방식: 전량 지정가 매도
- 타이밍: 매수 체결 즉시 주문

### 손절/청산 매도 (시장가 전량 매도)
1. 매수 후 24시간 경과시 익절 미체결
2. 실시간 RSI(14) > 70
3. EMA(20) 직전 3봉 기울기가 지속적으로 감소

## 운영 전략
- 매수 → 매도 사이클의 무한 반복
- 전략 종료 후 재시작: 1시간 대기
- 전량 매매: 항상 보유 원화 전액 사용

## 개발 요구사항
1. 실시간 데이터로 최소 10회 백테스트 수행
2. 실시간 모니터링 화면:
   - 평균매수가
   - 보유원화
   - 수익률
   - 체결내역
3. 코드 규칙:
   - 이모지 사용 금지
   - 소수점 계산시 올림 처리

## 개발 진행 상황
- [x] 코인원 API 문서 조사 완료
- [x] GitHub 레퍼런스 조사 완료
- [x] 프로젝트 구조 설계 완료
- [ ] API 연동 모듈 개발
- [ ] 기술적 지표 모듈 개발
- [ ] 매매 전략 구현
- [ ] 백테스트 시스템 구축
- [ ] 모니터링 UI 개발
- [ ] 배포 환경 구성

## 주요 기술 결정사항
1. **API 라이브러리**: 직접 구현 (requests 기반)
   - 코인원 공식 API 문서 기반
   - pycoinone 참고하되 최신 API 스펙 반영

2. **기술적 지표 계산**: pandas-ta 사용
   - RSI, EMA 계산에 검증된 라이브러리 활용
   - 기울기 계산은 직접 구현

3. **실시간 모니터링**: rich 라이브러리 사용
   - 터미널 기반 깔끔한 UI
   - 실시간 업데이트 지원

4. **배포**: Docker + Ubuntu VPS
   - 24시간 안정적 운영
   - 자동 재시작 설정

## Subagent 협업 시스템
프로젝트 전용 서브에이전트들이 각 전문 분야를 담당하며 자동으로 협업합니다:
- **api-builder**: API 연동 및 인증 처리
- **trading-strategy-analyzer**: 매매 전략 및 지표 분석
- **backtest-optimizer**: 백테스트 및 성과 분석
- **security-auditor**: 보안 검토 및 안정성 테스트
- **monitoring-ui-builder**: 실시간 모니터링 UI
- **deployment-engineer**: Docker 배포 및 운영

작업 내용에 따라 적절한 에이전트가 자동 선택되어 전문적인 도움을 제공합니다.