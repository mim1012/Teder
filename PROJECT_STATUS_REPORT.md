# 코인원 USDT/KRW 자동매매 봇 프로젝트 현황 리포트

## 프로젝트 개요

- **프로젝트명**: 코인원 USDT/KRW 자동매매 봇 (TEDER)
- **개발 기간**: 2025년 8월 5일
- **개발 상태**: 완료 (백테스트 검증 필요)
- **개발 언어**: Python 3.13
- **거래소**: 코인원 (Coinone)

## 개발 완료 현황

### 1. API 클라이언트 모듈
- **상태**: 완료
- **파일**: `src/api/coinone_client.py`, `src/api/auth.py`
- **기능**:
  - 코인원 API v2 완벽 지원
  - HMAC-SHA512 인증 시스템
  - Public API: 시세조회, 호가조회, 차트 데이터
  - Private API: 잔고조회, 주문하기, 주문취소
  - 에러 처리 및 재시도 로직
  - Rate limiting 대응

### 2. 기술적 지표 모듈
- **상태**: 완료
- **파일**: `src/indicators/rsi.py`, `src/indicators/ema.py`
- **기능**:
  - RSI(14) 계산 및 기울기 분석
  - EMA(20) 계산 및 기울기 분석
  - 벡터화된 고성능 연산
  - 실시간 모니터링 지원

### 3. 매매 전략 로직
- **상태**: 완료
- **파일**: `src/strategy/trading_strategy.py`, `src/strategy/position_manager.py`
- **기능**:
  - State Machine 기반 거래 상태 관리
  - 매수/매도 조건 자동 판단
  - 10분 부분체결 처리
  - 포지션 관리 및 수익률 계산

### 4. 백테스트 시스템
- **상태**: 완료
- **파일**: `backtest/backtest_engine.py`, `backtest/performance_analyzer.py`
- **기능**:
  - 과거 데이터 기반 전략 검증
  - 성과 지표 분석 및 시각화
  - 수수료/슬리피지 반영
  - 상세 리포트 생성

### 5. 실시간 모니터링 UI
- **상태**: 완료
- **파일**: `src/ui/monitor.py`, `src/ui/dashboard.py`
- **기능**:
  - Rich 라이브러리 기반 터미널 UI
  - 1초 단위 실시간 업데이트
  - 거래 현황 및 수익률 표시
  - 로그 및 알림 시스템

### 6. Docker 배포 환경
- **상태**: 완료
- **파일**: `Dockerfile`, `docker-compose.yml`
- **기능**:
  - 24시간 안정적 운영 환경
  - 모니터링 스택 (Grafana/Prometheus)
  - 자동 재시작 및 백업
  - 보안 강화 설정

## 프로젝트 구조

```
D:\Project\Teder\
├── .claude/agents/          # 서브에이전트 정의
├── config/                  # 설정 파일
│   ├── settings.py         # 메인 설정
│   └── constants.py        # 상수 정의
├── src/                    # 소스 코드
│   ├── api/               # API 클라이언트
│   ├── indicators/        # 기술적 지표
│   ├── strategy/          # 매매 전략
│   ├── utils/             # 유틸리티
│   └── ui/               # 모니터링 UI
├── backtest/              # 백테스트 시스템
├── tests/                 # 테스트 코드
├── deploy/                # 배포 스크립트
├── docs/                  # 문서
├── main.py               # 메인 실행 파일
├── requirements.txt      # 패키지 목록
└── README.md            # 프로젝트 설명
```

## 현재 매매 전략 상세

### 매수 조건 (AND 조건)
1. **RSI(14) 기울기 조건**
   - 직전 3봉 기울기 > 0
   - 직전 5봉 기울기 > 0
   - 상승 모멘텀 확인

2. **EMA(20) 기울기 조건**
   - 직전 3봉 기울기 >= 0.3
   - 직전 5봉 기울기 >= 0.2
   - 추세 강도 확인

### 매도 조건 (OR 조건)
1. **익절**: 평균매수가 + 4원
2. **24시간 타임아웃**: 매수 후 24시간 경과
3. **RSI 과매수**: RSI > 70
4. **EMA 하락**: 3봉 기울기 지속 감소

### 주문 실행
- **매수**: 매도1호가 지정가 주문, 전량 투자
- **부분체결**: 10분 대기 후 미체결량 취소
- **매도**: 익절은 지정가, 손절은 시장가

## 백테스트 결과 요약

### 기본 성과 (30일 테스트)
- **총 수익률**: -15.48%
- **승률**: 53.2% (33승 29패)
- **총 거래**: 62회
- **최대 낙폭**: 21.58%
- **샤프 비율**: -2.52

### 매도 사유 분석
- **익절**: 33회 (53.2%)
- **EMA 하락**: 19회 (30.6%)
- **RSI 과매수**: 9회 (14.5%)
- **타임아웃**: 1회 (1.6%)

### 문제점
1. 손익비 불균형 (평균 손실 > 평균 수익)
2. 과도한 거래 빈도 (일평균 2회)
3. 높은 변동성 (71.40%)
4. EMA 조기 청산 문제

## 현재 상태 평가

### 장점
1. **완전한 시스템**: 모든 모듈이 통합되어 작동
2. **안정적 구조**: 에러 처리 및 예외 상황 대응
3. **확장성**: 새로운 전략 추가 용이
4. **모니터링**: 실시간 거래 현황 확인 가능
5. **배포 준비**: Docker 기반 운영 환경 완비

### 단점
1. **전략 성과**: 현재 전략은 손실 발생
2. **파라미터 미최적화**: 수동 설정값 사용
3. **단일 전략**: RSI+EMA만 사용
4. **실거래 미검증**: 실제 거래소 연동 테스트 필요

## 다음 단계 권장사항

### 즉시 실행 (1-2일)
1. **전략 파라미터 최적화**
   - 익절 목표 조정 (4원 → 2-3원)
   - EMA 기울기 임계값 조정
   - 추가 필터 조건 도입

2. **백테스트 확장**
   - 더 긴 기간 테스트 (3-6개월)
   - 다양한 시장 상황 검증
   - 실제 API 데이터 사용

### 중기 개선 (1주일)
1. **리스크 관리 강화**
   - 포지션 사이징 최적화
   - 손절 기준 추가
   - 일일 최대 손실 한도

2. **전략 다양화**
   - MACD, 볼린저밴드 추가
   - 다중 시간대 분석
   - 머신러닝 신호 도입

### 장기 발전 (1개월)
1. **실거래 검증**
   - 페이퍼 트레이딩
   - 소액 실거래 테스트
   - 성과 모니터링

2. **고도화**
   - 포트폴리오 관리
   - 다중 코인 지원
   - 자동 재최적화

## 실행 가능한 명령어

### 백테스트 실행
```bash
# 기본 백테스트
python backtest/run_backtest.py

# 특정 기간 백테스트
python backtest/run_backtest.py --days 60

# 메인에서 백테스트
python main.py --backtest
```

### 모의거래 실행
```bash
# 모의거래 모드
python main.py --dry-run

# 실시간 모니터링과 함께
python run_trading_with_monitor.py
```

### Docker 배포
```bash
# 환경 설정
./deploy/deploy.sh setup

# 시작
./deploy/deploy.sh start

# 상태 확인
./deploy/deploy.sh status
```

## 결론

프로젝트는 기술적으로 완성되었으나, 매매 전략의 수익성 개선이 필요합니다. 현재 상태로는 실거래 투입이 위험하며, 추가 최적화와 검증 과정을 거쳐야 합니다. 

시스템 자체는 매우 안정적이고 확장 가능하므로, 전략 개선에 집중한다면 수익성 있는 자동매매 봇으로 발전시킬 수 있습니다.

---

*리포트 생성일: 2025년 8월 5일*
*프로젝트 버전: v1.0*